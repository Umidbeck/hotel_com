<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat #{room_number}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React va React DOM UMD formatida -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <!-- react-router-dom UMD formatida -->
    <script src="https://unpkg.com/react-router-dom@6.26.2/umd/react-router-dom.development.js" crossorigin></script>
    <!-- Lucide ikonkalari -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script>
        // Lucide ikonkalarni boshlash
        lucide.createIcons();
    </script>
</head>
<body>
<div id="root"></div>
<script>
    // WebChatInterface.jsx ni global o'zgaruvchi sifatida eksport qilish uchun
    window.WebChatInterface = (function () {
        try {
            return require('../../../chat-frontend/src/WebChatInterface.jsx').default;
        } catch (e) {
            console.error('WebChatInterface yuklanmadi:', e);
            return null;
        }
    })();

    const {createRoot} = ReactDOM;
    const {BrowserRouter, Routes, Route} = ReactRouterDOM;

    if (window.WebChatInterface) {
        const root = createRoot(document.getElementById('root'));
        root.render(
            <BrowserRouter>
                <Routes>
                    <Route path="/chat/:room_number" element={<window.WebChatInterface/>}/>
                </Routes>
            </BrowserRouter>
        );
    } else {
        document.getElementById('root').innerHTML = '<h1>Xatolik: WebChatInterface yuklanmadi</h1>';
    }
</script>
</body>
</html>